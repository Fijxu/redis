<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Crystal Docs 1.4.1">
<meta name="crystal_docs.project_version" content="0.5.1">
<meta name="crystal_docs.project_name" content="redis">



<link href="../css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../js/doc.js"></script>

  <meta name="repository-name" content="redis">
  <title>Redis::Cluster - redis 0.5.1</title>
  <script type="text/javascript">
    CrystalDocs.base_path = "../";
  </script>
</head>
<body>

<svg class="hidden">
  <symbol id="octicon-link" viewBox="0 0 16 16">
    <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
  </symbol>
</svg>
<div class="sidebar">
  <div class="sidebar-header">
    <div class="search-box">
      <input type="search" class="search-input" placeholder="Search..." spellcheck="false" aria-label="Search">
    </div>

    <div class="project-summary">
      <h1 class="project-name">
        <a href="../index.html">
          redis
        </a>
      </h1>

      <span class="project-version">
        0.5.1
      </span>
    </div>
  </div>

  <div class="search-results hidden">
    <ul class="search-list"></ul>
  </div>

  <div class="types-list">
    <ul>
  
  <li class="parent open current" data-id="redis/Redis" data-name="redis">
      <a href="../Redis.html">Redis</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/BusyGroup" data-name="redis::busygroup">
      <a href="../Redis/BusyGroup.html">BusyGroup</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Client" data-name="redis::client">
      <a href="../Redis/Client.html">Client</a>
      
    </li>
  
  <li class="parent open current" data-id="redis/Redis/Cluster" data-name="redis::cluster">
      <a href="../Redis/Cluster.html">Cluster</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/Cluster/Ask" data-name="redis::cluster::ask">
      <a href="../Redis/Cluster/Ask.html">Ask</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Cluster/CrossSlot" data-name="redis::cluster::crossslot">
      <a href="../Redis/Cluster/CrossSlot.html">CrossSlot</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Cluster/Error" data-name="redis::cluster::error">
      <a href="../Redis/Cluster/Error.html">Error</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Cluster/Moved" data-name="redis::cluster::moved">
      <a href="../Redis/Cluster/Moved.html">Moved</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="redis/Redis/Commands" data-name="redis::commands">
      <a href="../Redis/Commands.html">Commands</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/Commands/Hash" data-name="redis::commands::hash">
      <a href="../Redis/Commands/Hash.html">Hash</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Commands/List" data-name="redis::commands::list">
      <a href="../Redis/Commands/List.html">List</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Commands/Set" data-name="redis::commands::set">
      <a href="../Redis/Commands/Set.html">Set</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Commands/SortedSet" data-name="redis::commands::sortedset">
      <a href="../Redis/Commands/SortedSet.html">SortedSet</a>
      
    </li>
  
  <li class="parent " data-id="redis/Redis/Commands/Stream" data-name="redis::commands::stream">
      <a href="../Redis/Commands/Stream.html">Stream</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/Commands/Stream/XGroup" data-name="redis::commands::stream::xgroup">
      <a href="../Redis/Commands/Stream/XGroup.html">XGroup</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="redis/Redis/Connection" data-name="redis::connection">
      <a href="../Redis/Connection.html">Connection</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Error" data-name="redis::error">
      <a href="../Redis/Error.html">Error</a>
      
    </li>
  
  <li class="parent " data-id="redis/Redis/FullText" data-name="redis::fulltext(runnable)">
      <a href="../Redis/FullText.html">FullText</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/FullText/Filter" data-name="redis::fulltext::filter">
      <a href="../Redis/FullText/Filter.html">Filter</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/FullText/GeoFilter" data-name="redis::fulltext::geofilter">
      <a href="../Redis/FullText/GeoFilter.html">GeoFilter</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/FullText/GeoUnit" data-name="redis::fulltext::geounit">
      <a href="../Redis/FullText/GeoUnit.html">GeoUnit</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/FullText/Highlight" data-name="redis::fulltext::highlight">
      <a href="../Redis/FullText/Highlight.html">Highlight</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/FullText/SortBy" data-name="redis::fulltext::sortby">
      <a href="../Redis/FullText/SortBy.html">SortBy</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/FullText/SortDirection" data-name="redis::fulltext::sortdirection">
      <a href="../Redis/FullText/SortDirection.html">SortDirection</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/FullText/Summarize" data-name="redis::fulltext::summarize">
      <a href="../Redis/FullText/Summarize.html">Summarize</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="redis/Redis/Future" data-name="redis::future">
      <a href="../Redis/Future.html">Future</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/Future/NotResolved" data-name="redis::future::notresolved">
      <a href="../Redis/Future/NotResolved.html">NotResolved</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="redis/Redis/Graph" data-name="redis::graph">
      <a href="../Redis/Graph.html">Graph</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/Graph/Client" data-name="redis::graph::client(runnable)">
      <a href="../Redis/Graph/Client.html">Client</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Graph/Error" data-name="redis::graph::error">
      <a href="../Redis/Graph/Error.html">Error</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Graph/List" data-name="redis::graph::list">
      <a href="../Redis/Graph/List.html">List</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Graph/Map" data-name="redis::graph::map">
      <a href="../Redis/Graph/Map.html">Map</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Graph/Node" data-name="redis::graph::node">
      <a href="../Redis/Graph/Node.html">Node</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Graph/Property" data-name="redis::graph::property">
      <a href="../Redis/Graph/Property.html">Property</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Graph/Relationship" data-name="redis::graph::relationship">
      <a href="../Redis/Graph/Relationship.html">Relationship</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Graph/Result" data-name="redis::graph::result">
      <a href="../Redis/Graph/Result.html">Result</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Graph/ResultValue" data-name="redis::graph::resultvalue">
      <a href="../Redis/Graph/ResultValue.html">ResultValue</a>
      
    </li>
  
  <li class="parent " data-id="redis/Redis/Graph/Serializable" data-name="redis::graph::serializable">
      <a href="../Redis/Graph/Serializable.html">Serializable</a>
      
        <ul>
  
  <li class="parent " data-id="redis/Redis/Graph/Serializable/Node" data-name="redis::graph::serializable::node">
      <a href="../Redis/Graph/Serializable/Node.html">Node</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/Graph/Serializable/Node/Metadata" data-name="redis::graph::serializable::node::metadata">
      <a href="../Redis/Graph/Serializable/Node/Metadata.html">Metadata</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="redis/Redis/Graph/Serializable/Property" data-name="redis::graph::serializable::property">
      <a href="../Redis/Graph/Serializable/Property.html">Property</a>
      
    </li>
  
  <li class="parent " data-id="redis/Redis/Graph/Serializable/Relationship" data-name="redis::graph::serializable::relationship">
      <a href="../Redis/Graph/Serializable/Relationship.html">Relationship</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/Graph/Serializable/Relationship/Metadata" data-name="redis::graph::serializable::relationship::metadata">
      <a href="../Redis/Graph/Serializable/Relationship/Metadata.html">Metadata</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="redis/Redis/Graph/TypedResult" data-name="redis::graph::typedresult(t)">
      <a href="../Redis/Graph/TypedResult.html">TypedResult</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Graph/Value" data-name="redis::graph::value">
      <a href="../Redis/Graph/Value.html">Value</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="redis/Redis/JSON" data-name="redis::json(runnable)">
      <a href="../Redis/JSON.html">JSON</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/NoGroup" data-name="redis::nogroup">
      <a href="../Redis/NoGroup.html">NoGroup</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Parser" data-name="redis::parser">
      <a href="../Redis/Parser.html">Parser</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Pipeline" data-name="redis::pipeline">
      <a href="../Redis/Pipeline.html">Pipeline</a>
      
    </li>
  
  <li class="parent " data-id="redis/Redis/Streaming" data-name="redis::streaming">
      <a href="../Redis/Streaming.html">Streaming</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/Streaming/Message" data-name="redis::streaming::message">
      <a href="../Redis/Streaming/Message.html">Message</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Streaming/XAutoClaimResponse" data-name="redis::streaming::xautoclaimresponse">
      <a href="../Redis/Streaming/XAutoClaimResponse.html">XAutoClaimResponse</a>
      
    </li>
  
  <li class="parent " data-id="redis/Redis/Streaming/XPendingBaseResponse" data-name="redis::streaming::xpendingbaseresponse">
      <a href="../Redis/Streaming/XPendingBaseResponse.html">XPendingBaseResponse</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/Streaming/XPendingBaseResponse/Data" data-name="redis::streaming::xpendingbaseresponse::data">
      <a href="../Redis/Streaming/XPendingBaseResponse/Data.html">Data</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="redis/Redis/Streaming/XPendingExtendedResponse" data-name="redis::streaming::xpendingextendedresponse">
      <a href="../Redis/Streaming/XPendingExtendedResponse.html">XPendingExtendedResponse</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/Streaming/XPendingExtendedResponse/MessageData" data-name="redis::streaming::xpendingextendedresponse::messagedata">
      <a href="../Redis/Streaming/XPendingExtendedResponse/MessageData.html">MessageData</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="redis/Redis/Streaming/XReadGroupResponse" data-name="redis::streaming::xreadgroupresponse">
      <a href="../Redis/Streaming/XReadGroupResponse.html">XReadGroupResponse</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/Streaming/XReadGroupResponse/Result" data-name="redis::streaming::xreadgroupresponse::result">
      <a href="../Redis/Streaming/XReadGroupResponse/Result.html">Result</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="redis/Redis/Subscription" data-name="redis::subscription">
      <a href="../Redis/Subscription.html">Subscription</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/Subscription/InvalidMessage" data-name="redis::subscription::invalidmessage">
      <a href="../Redis/Subscription/InvalidMessage.html">InvalidMessage</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="redis/Redis/TimeSeries" data-name="redis::timeseries(runnable)">
      <a href="../Redis/TimeSeries.html">TimeSeries</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/TimeSeries/Aggregation" data-name="redis::timeseries::aggregation">
      <a href="../Redis/TimeSeries/Aggregation.html">Aggregation</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/TimeSeries/AggregationType" data-name="redis::timeseries::aggregationtype">
      <a href="../Redis/TimeSeries/AggregationType.html">AggregationType</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/TimeSeries/BucketTimestamp" data-name="redis::timeseries::buckettimestamp">
      <a href="../Redis/TimeSeries/BucketTimestamp.html">BucketTimestamp</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/TimeSeries/Datapoint" data-name="redis::timeseries::datapoint">
      <a href="../Redis/TimeSeries/Datapoint.html">Datapoint</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/TimeSeries/Datapoints" data-name="redis::timeseries::datapoints">
      <a href="../Redis/TimeSeries/Datapoints.html">Datapoints</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/TimeSeries/DuplicatePolicy" data-name="redis::timeseries::duplicatepolicy">
      <a href="../Redis/TimeSeries/DuplicatePolicy.html">DuplicatePolicy</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/TimeSeries/Encoding" data-name="redis::timeseries::encoding">
      <a href="../Redis/TimeSeries/Encoding.html">Encoding</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/TimeSeries/Labels" data-name="redis::timeseries::labels">
      <a href="../Redis/TimeSeries/Labels.html">Labels</a>
      
    </li>
  
  <li class="parent " data-id="redis/Redis/TimeSeries/MRangeResponse" data-name="redis::timeseries::mrangeresponse">
      <a href="../Redis/TimeSeries/MRangeResponse.html">MRangeResponse</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/TimeSeries/MRangeResponse/DatapointMap" data-name="redis::timeseries::mrangeresponse::datapointmap">
      <a href="../Redis/TimeSeries/MRangeResponse/DatapointMap.html">DatapointMap</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="redis/Redis/TimeSeries/Range" data-name="redis::timeseries::range">
      <a href="../Redis/TimeSeries/Range.html">Range</a>
      
    </li>
  
  <li class="parent " data-id="redis/Redis/TimeSeries/RangeOptions" data-name="redis::timeseries::rangeoptions">
      <a href="../Redis/TimeSeries/RangeOptions.html">RangeOptions</a>
      
        <ul>
  
  <li class=" " data-id="redis/Redis/TimeSeries/RangeOptions/Aggregation" data-name="redis::timeseries::rangeoptions::aggregation">
      <a href="../Redis/TimeSeries/RangeOptions/Aggregation.html">Aggregation</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="redis/Redis/Transaction" data-name="redis::transaction">
      <a href="../Redis/Transaction.html">Transaction</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Value" data-name="redis::value">
      <a href="../Redis/Value.html">Value</a>
      
    </li>
  
  <li class=" " data-id="redis/Redis/Writer" data-name="redis::writer">
      <a href="../Redis/Writer.html">Writer</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

  </div>
</div>


<div class="main-content">
<h1 class="type-name">

  <span class="kind">class</span> Redis::Cluster

</h1>


  <ul class="superclass-hierarchy"><li class="superclass"><a href="../Redis/Cluster.html">Redis::Cluster</a></li><li class="superclass">Reference</li><li class="superclass">Object</li></ul>




  <h2>
    <a id="overview" class="anchor" href="#overview">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Overview
  </h2>

  <p>Use in place of a <code><a href="../Redis/Client.html">Redis::Client</a></code> when talking to Redis clusters. This class
will discover all nodes in a Redis cluster when given a URI for any of them,
route commands to appropriate shards based on the keys they operate on, and
route commands which do not change state to shard replicas to spread the
load across the cluster.</p>
<p>It's important that, when using commands which operate on multiple keys (for
example: <code>MGET</code>, <code>DEL</code>, <code>RPOPLPUSH</code>, etc) that <em>all</em> specified keys reside
on the same shard in the cluster. Usually, this means designing your key
names with curly braces around parts of them to ensure they hash to the same
<a href="https://redis.io/commands/cluster-keyslot">key slot</a>. For example:</p>
<pre><code class="language-crystal">redis.del <span class="s">&quot;{comment}:1&quot;</span>, <span class="s">&quot;{comment}:2&quot;</span>
value <span class="o">=</span> redis.rpoplpush <span class="s">&quot;{queue}:default&quot;</span>, <span class="s">&quot;{queue}:default:pending&quot;</span></code></pre>
<p>If you want to use a Redis module that provides custom commands, you can
register them as read-only with <code><a href="../Redis/Cluster.html#register_read_only_commands%28commands%3AEnumerable%28String%29%29-class-method">Redis::Cluster.register_read_only_commands</a></code>
and they will automatically be routed to replicas. See
<a href="https://github.com/jgaskins/redis/blob/3e874563dd524df9af6827f72edecca13a615802/src/cluster/json.cr#L5-L15"><code>redis/cluster/json.cr</code></a>
for example usage.</p>
<p><span class="flag lime">EXPERIMENTAL</span>  Cluster support is still under development. Some APIs may change while details are discovered and highly customized clusters (for example, servers handling individual hash slots or multiple hash-slot ranges) are not yet supported.</p>





  <h2>
    <a id="included-modules" class="anchor" href="#included-modules">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Included Modules
  </h2>
  <ul class="other-types-list">
    
      <li class="other-type"><a href="../Redis/Commands.html">Redis::Commands</a></li>
    
  </ul>










  <h2>
    <a id="defined-in" class="anchor" href="#defined-in">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Defined in:
  </h2>
  
    
      <a href="https://github.com/jgaskins/redis/blob/v0.5.1/src/cluster.cr#L31" target="_blank">
        cluster.cr
      </a>
    
    <br/>
  
    
      <a href="https://github.com/jgaskins/redis/blob/v0.5.1/src/errors.cr#L15" target="_blank">
        errors.cr
      </a>
    
    <br/>
  





  <h2>
    <a id="constructors" class="anchor" href="#constructors">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Constructors
  </h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#new%28uri%3AURI%3DURI.parse%28ENV%5B%22REDIS_CLUSTER_URL%22%5D%3F%7C%7C%22redis%3A///%22%29%29-class-method" class="signature"><strong>.new</strong>(uri : URI = <span class="t">URI</span>.parse(<span class="t">ENV</span>[<span class="s">&quot;REDIS_CLUSTER_URL&quot;</span>]? || <span class="s">&quot;redis:///&quot;</span>))</a>
        
          <div class="summary"><p>Pass a <code>URI</code> (defaulting to the <code>REDIS_CLUSTER_URL</code> environment variable) to connect to the specified Redis cluster — the URI can point to <em>any</em> server in the cluster and <code><a href="../Redis/Cluster.html">Redis::Cluster</a></code> will discover the rest.</p></div>
        
      </li>
    
  </ul>



  <h2>
    <a id="class-method-summary" class="anchor" href="#class-method-summary">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Class Method Summary
  </h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#register_read_only_command%28command%3AString%29-class-method" class="signature"><strong>.register_read_only_command</strong>(command : String)</a>
        
          <div class="summary"><p>Tell the cluster driver that the specified Redis command can be routed to read-only replicas.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#register_read_only_commands%28commands%3AEnumerable%28String%29%29-class-method" class="signature"><strong>.register_read_only_commands</strong>(commands : Enumerable(String))</a>
        
          <div class="summary"><p>Tell the cluster driver that all the specified Redis commands can be routed to read-only replicas.</p></div>
        
      </li>
    
  </ul>



  <h2>
    <a id="instance-method-summary" class="anchor" href="#instance-method-summary">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Instance Method Summary
  </h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#close-instance-method" class="signature"><strong>#close</strong></a>
        
          <div class="summary"><p>Close all connections to this Redis cluster</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#flushdb-instance-method" class="signature"><strong>#flushdb</strong></a>
        
          <div class="summary"><p>Executes <code><a href="../Redis/Cluster.html#flushdb-instance-method">#flushdb</a></code> on each shard in the cluster.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#keys%3AArray%28String%29-instance-method" class="signature"><strong>#keys</strong> : Array(String)</a>
        
          <div class="summary"><p>Get all key across all shards.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#pipeline%28key%3AString%2C%26%29-instance-method" class="signature"><strong>#pipeline</strong>(key : String, &)</a>
        
          <div class="summary"><p>Run a pipeline for the specified key</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#run%28commandfull_command%29-instance-method" class="signature"><strong>#run</strong>(command full_command)</a>
        
          <div class="summary"><p>Execute the given command and return the result from the server.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#scan_each%28%2Aargs%2C%2A%2Akwargs%2C%26%29%3ANil-instance-method" class="signature"><strong>#scan_each</strong>(*args, **kwargs, &) : Nil</a>
        
          <div class="summary"><p>Execute <code>Commands#scan_each</code> on each shard, yielding any matching keys.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#slot_for%28key%3AString%29-instance-method" class="signature"><strong>#slot_for</strong>(key : String)</a>
        
          <div class="summary"><p>Return the Redis hash slot for the given key.</p></div>
        
      </li>
    
  </ul>





<div class="methods-inherited">
  
    

  <h3>Instance methods inherited from module <code><a href="../Redis/Commands.html">Redis::Commands</a></code></h3>
  
  
    <a href="../Redis/Commands.html#decr%28key%3AString%29-instance-method" class="tooltip">
      <span>decr(key : String)</span>
    decr</a>, 
    
  
    <a href="../Redis/Commands.html#decrby%28key%3AString%2Camount%3AInt%7CString%29-instance-method" class="tooltip">
      <span>decrby(key : String, amount : Int | String)</span>
    decrby</a>, 
    
  
    <a href="../Redis/Commands.html#del%28%2Akeys%3AString%29-instance-method" class="tooltip">
      <span>del(*keys : String)</span>
    del</a>, 
    
  
    <a href="../Redis/Commands.html#exists%28%2Akeys%3AString%29-instance-method" class="tooltip">
      <span>exists(*keys : String)</span>
    exists</a>, 
    
  
    <a href="../Redis/Commands.html#expire%28key%3AString%2Cttl%3AInt%29-instance-method" class="tooltip">
      <span>expire(key : String, ttl : Int)</span>
    expire</a>, 
    
  
    <a href="../Redis/Commands.html#expireat%28key%3AString%2Cat%3ATime%29-instance-method" class="tooltip">
      <span>expireat(key : String, at : Time)</span>
    expireat</a>, 
    
  
    <a href="../Redis/Commands.html#flushdb-instance-method" class="tooltip">
      <span>flushdb</span>
    flushdb</a>, 
    
  
    <a href="../Redis/Commands.html#ft-instance-method" class="tooltip">
      <span>ft</span>
    ft</a>, 
    
  
    <a href="../Redis/Commands.html#get%28key%3AString%29-instance-method" class="tooltip">
      <span>get(key : String)</span>
    get</a>, 
    
  
    <a href="../Redis/Commands.html#incr%28key%3AString%29-instance-method" class="tooltip">
      <span>incr(key : String)</span>
    incr</a>, 
    
  
    <a href="../Redis/Commands.html#incrby%28key%3AString%2Camount%3AInt%7CString%29-instance-method" class="tooltip">
      <span>incrby(key : String, amount : Int | String)</span>
    incrby</a>, 
    
  
    <a href="../Redis/Commands.html#info-instance-method" class="tooltip">
      <span>info</span>
    info</a>, 
    
  
    <a href="../Redis/Commands.html#json-instance-method" class="tooltip">
      <span>json</span>
    json</a>, 
    
  
    <a href="../Redis/Commands.html#keys%28pattern%3D%22%2A%22%29-instance-method" class="tooltip">
      <span>keys(pattern = <span class="s">&quot;*&quot;</span>)</span>
    keys</a>, 
    
  
    <a href="../Redis/Commands.html#mget%28keys%3AEnumerable%28String%29%29-instance-method" class="tooltip">
      <span>mget(keys : Enumerable(String))</span>
    mget</a>, 
    
  
    <a href="../Redis/Commands.html#mset%28data%3AHash%28String%2CString%29%29-instance-method" class="tooltip">
      <span>mset(data : Hash(String, String))</span>
    mset</a>, 
    
  
    <a href="../Redis/Commands.html#pexpire%28key%3AString%2Cttl%3AInt%29-instance-method" class="tooltip">
      <span>pexpire(key : String, ttl : Int)</span>
    pexpire</a>, 
    
  
    <a href="../Redis/Commands.html#pexpireat%28key%3AString%2Cat%3ATime%29-instance-method" class="tooltip">
      <span>pexpireat(key : String, at : Time)</span>
    pexpireat</a>, 
    
  
    <a href="../Redis/Commands.html#pttl%28key%3AString%29-instance-method" class="tooltip">
      <span>pttl(key : String)</span>
    pttl</a>, 
    
  
    <a href="../Redis/Commands.html#publish%28channel%3AString%2Cmessage%3AString%29-instance-method" class="tooltip">
      <span>publish(channel : String, message : String)</span>
    publish</a>, 
    
  
    <a href="../Redis/Commands.html#run%28command%29-instance-method" class="tooltip">
      <span>run(command)</span>
    run</a>, 
    
  
    <a href="../Redis/Commands.html#scan%28cursor%3AString%3D%220%22%2Cmatch%3AString%3F%3Dnil%2Ccount%3AString%7CInt%7CNil%3Dnil%2Ctype%3AString%3F%3Dnil%29-instance-method" class="tooltip">
      <span>scan(cursor : String = <span class="s">&quot;0&quot;</span>, match : String? = <span class="n">nil</span>, count : String | Int | Nil = <span class="n">nil</span>, type : String? = <span class="n">nil</span>)</span>
    scan</a>, 
    
  
    <a href="../Redis/Commands.html#set%28key%3AString%2Cvalue%3AString%2Cex%3AString%7CInt%3F%3Dnil%2Cpx%3AString%7CInt%7CNil%3Dnil%2Cnx%3Dfalse%2Cxx%3Dfalse%2Ckeepttl%3Dfalse%29-instance-method" class="tooltip">
      <span>set(key : String, value : String, ex : String | Int? = <span class="n">nil</span>, px : String | Int | Nil = <span class="n">nil</span>, nx = <span class="n">false</span>, xx = <span class="n">false</span>, keepttl = <span class="n">false</span>)<br/>set(key, value, ex : Time, nx = <span class="n">false</span>, xx = <span class="n">false</span>, keepttl = <span class="n">false</span>)<br/>set(key, value, ex : Time::Span, nx = <span class="n">false</span>, xx = <span class="n">false</span>, keepttl = <span class="n">false</span>)</span>
    set</a>, 
    
  
    <a href="../Redis/Commands.html#ts-instance-method" class="tooltip">
      <span>ts</span>
    ts</a>, 
    
  
    <a href="../Redis/Commands.html#ttl%28key%3AString%29-instance-method" class="tooltip">
      <span>ttl(key : String)</span>
    ttl</a>, 
    
  
    <a href="../Redis/Commands.html#type%28key%3AString%29-instance-method" class="tooltip">
      <span>type(key : String)</span>
    type</a>, 
    
  
    <a href="../Redis/Commands.html#unlink%28keys%3AEnumerable%28String%29%29-instance-method" class="tooltip">
      <span>unlink(keys : Enumerable(String))<br/>unlink(*keys : String)</span>
    unlink</a>
    
  


    


    


  
    

  <h3>Instance methods inherited from module <code><a href="../Redis/Commands/Stream.html">Redis::Commands::Stream</a></code></h3>
  
  
    <a href="../Redis/Commands/Stream.html#xack%28key%3AString%2Cgroup%3AString%2Cid%3AString%29-instance-method" class="tooltip">
      <span>xack(key : String, group : String, id : String)<br/>xack(key : String, group : String, ids : Enumerable(String))</span>
    xack</a>, 
    
  
    <a href="../Redis/Commands/Stream.html#xadd%28key%3AString%2Cid%3AString%2Cmaxlen%2Cdata%3AHash%28String%2CString%29%29-instance-method" class="tooltip">
      <span>xadd(key : String, id : String, maxlen, data : Hash(String, String))<br/>xadd(key : String, id : String, data : Hash(String, String))<br/>xadd(key : String, id : String, maxlen = <span class="n">nil</span>, **data)</span>
    xadd</a>, 
    
  
    <a href="../Redis/Commands/Stream.html#xautoclaim%28key%3AString%2Cgroup%3AString%2Cconsumer%3AString%2Cmin_idle_time%3ATime%3A%3ASpan%2Cstart%3AString%2Ccount%3AInt%7CString%7CNil%3Dnil%29-instance-method" class="tooltip">
      <span>xautoclaim(key : String, group : String, consumer : String, min_idle_time : Time::Span, start : String, count : Int | String | Nil = <span class="n">nil</span>)</span>
    xautoclaim</a>, 
    
  
    <a href="../Redis/Commands/Stream.html#xdel%28key%3AString%2Cids%3AEnumerable%28String%29%29-instance-method" class="tooltip">
      <span>xdel(key : String, ids : Enumerable(String))<br/>xdel(key : String, *ids : String)</span>
    xdel</a>, 
    
  
    <a href="../Redis/Commands/Stream.html#xgroup%28command%3AString%2Ckey%3AString%2Cgroupname%3AString%29-instance-method" class="tooltip">
      <span>xgroup(command : String, key : String, groupname : String)<br/>xgroup(command : XGroup, key : String, groupname : String, *, id : String? = <span class="n">nil</span>, mkstream = <span class="n">false</span>, consumer_name : String? = <span class="n">nil</span>)<br/>xgroup(command : String, key : String, groupname : String, *args : String)</span>
    xgroup</a>, 
    
  
    <a href="../Redis/Commands/Stream.html#xgroup_create%28key%3AString%2Cgroupname%3AString%2C%2A%2Cid%3AString%3D%22%24%22%2Cmkstream%3Dfalse%29-instance-method" class="tooltip">
      <span>xgroup_create(key : String, groupname : String, *, id : String = <span class="s">&quot;$&quot;</span>, mkstream = <span class="n">false</span>)</span>
    xgroup_create</a>, 
    
  
    <a href="../Redis/Commands/Stream.html#xgroup_create_consumer%28key%3AString%2Cgroupname%3AString%2Cconsumer_name%3AString%29-instance-method" class="tooltip">
      <span>xgroup_create_consumer(key : String, groupname : String, consumer_name : String)</span>
    xgroup_create_consumer</a>, 
    
  
    <a href="../Redis/Commands/Stream.html#xlen%28key%3AString%29-instance-method" class="tooltip">
      <span>xlen(key : String)</span>
    xlen</a>, 
    
  
    <a href="../Redis/Commands/Stream.html#xpending%28key%3AString%2Cgroup%3AString%2Cstart%3AString%2Cendfinish%3AString%2Ccount%3AString%7CInt%2Cidle%3AString%7CTime%3A%3ASpan%7CNil%3Dnil%29-instance-method" class="tooltip">
      <span>xpending(key : String, group : String, start : String, end finish : String, count : String | Int, idle : String | Time::Span | Nil = <span class="n">nil</span>)<br/>xpending(key : String, group : String)</span>
    xpending</a>, 
    
  
    <a href="../Redis/Commands/Stream.html#xrange%28key%3AString%2Cstartmin%2Cendmax%2Ccount%3Dnil%29-instance-method" class="tooltip">
      <span>xrange(key : String, start min, end max, count = <span class="n">nil</span>)</span>
    xrange</a>, 
    
  
    <a href="../Redis/Commands/Stream.html#xreadgroup%28group%3AString%2Cconsumer%3AString%2Ccount%3AString%7CInt%7CNil%3Dnil%2Cblock%3ATime%3A%3ASpan%7CString%7CInt%7CNil%3Dnil%2Cno_ack%3Dfalse%2Cstreams%3A%3A%3AHash%28String%2CString%29%3D%7B%7DofString%3D%3EString%29-instance-method" class="tooltip">
      <span>xreadgroup(group : String, consumer : String, count : String | Int | Nil = <span class="n">nil</span>, block : Time::Span | String | Int | Nil = <span class="n">nil</span>, no_ack = <span class="n">false</span>, streams : ::Hash(String, String) = {} <span class="k">of</span> <span class="t">String</span> =&gt; <span class="t">String</span>)<br/>xreadgroup(group : String, consumer : String, count : String | Int | Nil = <span class="n">nil</span>, block : Time::Span | String | Int | Nil = <span class="n">nil</span>, no_ack = <span class="n">false</span>, streams : NamedTuple = <span class="t">NamedTuple</span>.<span class="k">new</span>)</span>
    xreadgroup</a>
    
  


    


    


  
    

  <h3>Instance methods inherited from module <code><a href="../Redis/Commands/SortedSet.html">Redis::Commands::SortedSet</a></code></h3>
  
  
    <a href="../Redis/Commands/SortedSet.html#zadd%28key%3AString%2Cscore%3AString%7CFloat%2Cvalue%3AString%29-instance-method" class="tooltip">
      <span>zadd(key : String, score : String | Float, value : String)<br/>zadd(key : String, values : Enumerable)</span>
    zadd</a>, 
    
  
    <a href="../Redis/Commands/SortedSet.html#zcard%28key%3AString%29-instance-method" class="tooltip">
      <span>zcard(key : String)</span>
    zcard</a>, 
    
  
    <a href="../Redis/Commands/SortedSet.html#zrange%28key%3AString%2Cstarting%3AString%7CInt%2Cending%3AString%7CInt%2Cwith_scores%3ABool%3Dfalse%29-instance-method" class="tooltip">
      <span>zrange(key : String, starting : String | Int, ending : String | Int, with_scores : Bool = <span class="n">false</span>)</span>
    zrange</a>, 
    
  
    <a href="../Redis/Commands/SortedSet.html#zrangebyscore%28key%3AString%2Clow%3AString%7CFloat%2Chigh%3AString%7CFloat%2Climit%3AEnumerable%28String%29%3F%3Dnil%29-instance-method" class="tooltip">
      <span>zrangebyscore(key : String, low : String | Float, high : String | Float, limit : Enumerable(String)? = <span class="n">nil</span>)</span>
    zrangebyscore</a>, 
    
  
    <a href="../Redis/Commands/SortedSet.html#zrem%28key%3AString%2Cvalue%3AString%29-instance-method" class="tooltip">
      <span>zrem(key : String, value : String)</span>
    zrem</a>, 
    
  
    <a href="../Redis/Commands/SortedSet.html#zremrangebyrank%28key%3AString%2Clow%3AInt%2Chigh%3AInt%29-instance-method" class="tooltip">
      <span>zremrangebyrank(key : String, low : Int, high : Int)</span>
    zremrangebyrank</a>, 
    
  
    <a href="../Redis/Commands/SortedSet.html#zremrangebyscore%28key%3AString%2Clow%3AString%7CFloat%2Chigh%3AString%7CFloat%29-instance-method" class="tooltip">
      <span>zremrangebyscore(key : String, low : String | Float, high : String | Float)</span>
    zremrangebyscore</a>, 
    
  
    <a href="../Redis/Commands/SortedSet.html#zrevrange%28key%3AString%2Cstarting%3AString%7CInt%2Cending%3AString%7CInt%2Cwith_scores%3ABool%3Dfalse%29-instance-method" class="tooltip">
      <span>zrevrange(key : String, starting : String | Int, ending : String | Int, with_scores : Bool = <span class="n">false</span>)</span>
    zrevrange</a>
    
  


    


    


  
    

  <h3>Instance methods inherited from module <code><a href="../Redis/Commands/Set.html">Redis::Commands::Set</a></code></h3>
  
  
    <a href="../Redis/Commands/Set.html#sadd%28key%3AString%2C%2Avalues%3AString%29-instance-method" class="tooltip">
      <span>sadd(key : String, *values : String)</span>
    sadd</a>, 
    
  
    <a href="../Redis/Commands/Set.html#scard%28key%3AString%29-instance-method" class="tooltip">
      <span>scard(key : String)</span>
    scard</a>, 
    
  
    <a href="../Redis/Commands/Set.html#sdiff%28first%3AString%2Csecond%3AString%29-instance-method" class="tooltip">
      <span>sdiff(first : String, second : String)</span>
    sdiff</a>, 
    
  
    <a href="../Redis/Commands/Set.html#sinter%28first%3AString%2C%2Aothers%3AString%29-instance-method" class="tooltip">
      <span>sinter(first : String, *others : String)</span>
    sinter</a>, 
    
  
    <a href="../Redis/Commands/Set.html#sismember%28key%3AString%2Cvalue%3AString%29-instance-method" class="tooltip">
      <span>sismember(key : String, value : String)</span>
    sismember</a>, 
    
  
    <a href="../Redis/Commands/Set.html#smembers%28key%3AString%29-instance-method" class="tooltip">
      <span>smembers(key : String)</span>
    smembers</a>, 
    
  
    <a href="../Redis/Commands/Set.html#srem%28key%3AString%2Cmembers%3AEnumerable%28String%29%29-instance-method" class="tooltip">
      <span>srem(key : String, members : Enumerable(String))<br/>srem(key : String, *values : String)</span>
    srem</a>
    
  


    


    


  
    

  <h3>Instance methods inherited from module <code><a href="../Redis/Commands/List.html">Redis::Commands::List</a></code></h3>
  
  
    <a href="../Redis/Commands/List.html#blpop%28%2Akeys%3AString%2Ctimeout%3ATime%3A%3ASpan%29-instance-method" class="tooltip">
      <span>blpop(*keys : String, timeout : Time::Span)<br/>blpop(*keys : String, timeout : Int | Float)<br/>blpop(*keys : String, timeout : String)</span>
    blpop</a>, 
    
  
    <a href="../Redis/Commands/List.html#brpop%28keys%3AEnumerable%28String%29%2Ctimeout%3AInt%29-instance-method" class="tooltip">
      <span>brpop(keys : Enumerable(String), timeout : Int)<br/>brpop(*keys : String, timeout : Time::Span)<br/>brpop(*keys : String, timeout : Number)<br/>brpop(*keys : String, timeout : String)</span>
    brpop</a>, 
    
  
    <a href="../Redis/Commands/List.html#llen%28key%3AString%29-instance-method" class="tooltip">
      <span>llen(key : String)</span>
    llen</a>, 
    
  
    <a href="../Redis/Commands/List.html#lpop%28key%3AString%2Ccount%3AString%3F%3Dnil%29-instance-method" class="tooltip">
      <span>lpop(key : String, count : String? = <span class="n">nil</span>)</span>
    lpop</a>, 
    
  
    <a href="../Redis/Commands/List.html#lpush%28key%3AString%2Cvalues%3AEnumerable%28String%29%29-instance-method" class="tooltip">
      <span>lpush(key : String, values : Enumerable(String))<br/>lpush(key, *values : String)</span>
    lpush</a>, 
    
  
    <a href="../Redis/Commands/List.html#lrange%28key%3AString%2Cstart%3AString%2Cfinish%3AString%29-instance-method" class="tooltip">
      <span>lrange(key : String, start : String, finish : String)</span>
    lrange</a>, 
    
  
    <a href="../Redis/Commands/List.html#lrem%28key%3AString%2Ccount%3AInt%2Cvalue%3AString%29-instance-method" class="tooltip">
      <span>lrem(key : String, count : Int, value : String)</span>
    lrem</a>, 
    
  
    <a href="../Redis/Commands/List.html#rpop%28key%3AString%29-instance-method" class="tooltip">
      <span>rpop(key : String)</span>
    rpop</a>, 
    
  
    <a href="../Redis/Commands/List.html#rpoplpush%28source%3AString%2Cdestination%3AString%29-instance-method" class="tooltip">
      <span>rpoplpush(source : String, destination : String)</span>
    rpoplpush</a>, 
    
  
    <a href="../Redis/Commands/List.html#rpush%28key%2C%2Avalues%3AString%29-instance-method" class="tooltip">
      <span>rpush(key, *values : String)</span>
    rpush</a>
    
  


    


    


  
    

  <h3>Instance methods inherited from module <code><a href="../Redis/Commands/Hash.html">Redis::Commands::Hash</a></code></h3>
  
  
    <a href="../Redis/Commands/Hash.html#hget%28key%3AString%2Cfield%3AString%29-instance-method" class="tooltip">
      <span>hget(key : String, field : String)</span>
    hget</a>, 
    
  
    <a href="../Redis/Commands/Hash.html#hgetall%28key%3AString%29-instance-method" class="tooltip">
      <span>hgetall(key : String)</span>
    hgetall</a>, 
    
  
    <a href="../Redis/Commands/Hash.html#hmget%28key%3AString%2C%2Afields%3AString%29-instance-method" class="tooltip">
      <span>hmget(key : String, *fields : String)</span>
    hmget</a>, 
    
  
    <a href="../Redis/Commands/Hash.html#hmset%28key%3AString%2Cdata%3A%3A%3AHash%28String%2CString%29%29-instance-method" class="tooltip">
      <span>hmset(key : String, data : ::Hash(String, String))</span>
    hmset</a>, 
    
  
    <a href="../Redis/Commands/Hash.html#hset%28key%3AString%2Cdata%3A%3A%3AHash%28String%2CString%29%29-instance-method" class="tooltip">
      <span>hset(key : String, data : ::Hash(String, String))<br/>hset(key : String, *fields : String)<br/>hset(key : String, **fields : String)</span>
    hset</a>
    
  


    


    


  
    


    


    


  
    


    


    


  
</div>


  <h2>
    <a id="constructor-detail" class="anchor" href="#constructor-detail">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Constructor Detail
  </h2>
  
    <div class="entry-detail" id="new(uri:URI=URI.parse(ENV[&quot;REDIS_CLUSTER_URL&quot;]?||&quot;redis:///&quot;))-class-method">
      <div class="signature">
        
        def self.<strong>new</strong>(uri : URI = <span class="t">URI</span>.parse(<span class="t">ENV</span>[<span class="s">&quot;REDIS_CLUSTER_URL&quot;</span>]? || <span class="s">&quot;redis:///&quot;</span>))

        <a class="method-permalink" href="#new%28uri%3AURI%3DURI.parse%28ENV%5B%22REDIS_CLUSTER_URL%22%5D%3F%7C%7C%22redis%3A///%22%29%29-class-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Pass a <code>URI</code> (defaulting to the <code>REDIS_CLUSTER_URL</code> environment variable)
to connect to the specified Redis cluster — the URI can point to <em>any</em>
server in the cluster and <code><a href="../Redis/Cluster.html">Redis::Cluster</a></code> will discover the rest.</p>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/jgaskins/redis/blob/v0.5.1/src/cluster.cr#L72" target="_blank">View source</a>]
        
      </div>
    </div>
  



  <h2>
    <a id="class-method-detail" class="anchor" href="#class-method-detail">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Class Method Detail
  </h2>
  
    <div class="entry-detail" id="register_read_only_command(command:String)-class-method">
      <div class="signature">
        
        def self.<strong>register_read_only_command</strong>(command : String)

        <a class="method-permalink" href="#register_read_only_command%28command%3AString%29-class-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Tell the cluster driver that the specified Redis command can be routed to
read-only replicas.</p>
<pre><code class="language-crystal"><span class="t">Redis</span><span class="t">::</span><span class="t">Cluster</span>.register_read_only_command <span class="s">&quot;mymodule.get&quot;</span></code></pre>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/jgaskins/redis/blob/v0.5.1/src/cluster.cr#L65" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="register_read_only_commands(commands:Enumerable(String))-class-method">
      <div class="signature">
        
        def self.<strong>register_read_only_commands</strong>(commands : Enumerable(String))

        <a class="method-permalink" href="#register_read_only_commands%28commands%3AEnumerable%28String%29%29-class-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Tell the cluster driver that all the specified Redis commands can be
routed to read-only replicas.</p>
<pre><code class="language-crystal"><span class="t">Redis</span><span class="t">::</span><span class="t">Cluster</span>.register_read_only_commands <span class="s">%w[
  mymodule.get
  mymodule.mget
]</span></code></pre>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/jgaskins/redis/blob/v0.5.1/src/cluster.cr#L55" target="_blank">View source</a>]
        
      </div>
    </div>
  



  <h2>
    <a id="instance-method-detail" class="anchor" href="#instance-method-detail">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Instance Method Detail
  </h2>
  
    <div class="entry-detail" id="close-instance-method">
      <div class="signature">
        
        def <strong>close</strong>

        <a class="method-permalink" href="#close-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Close all connections to this Redis cluster</p>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/jgaskins/redis/blob/v0.5.1/src/cluster.cr#L338" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="flushdb-instance-method">
      <div class="signature">
        
        def <strong>flushdb</strong>

        <a class="method-permalink" href="#flushdb-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Executes <code><a href="../Redis/Cluster.html#flushdb-instance-method">#flushdb</a></code> on each shard in the cluster.</p>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/jgaskins/redis/blob/v0.5.1/src/cluster.cr#L210" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="keys:Array(String)-instance-method">
      <div class="signature">
        
        def <strong>keys</strong> : Array(String)

        <a class="method-permalink" href="#keys%3AArray%28String%29-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Get all key across all shards. This executes a <code><a href="../Redis/Cluster.html#keys%3AArray%28String%29-instance-method">#keys</a></code> command on every
shard in the cluster. Probably not a good idea in production since this
will block every Redis shard or replica for the duration of the query, but
we're supporting it because you may have a reasonable use case for it at
<em>some</em> point and it's just not easy to do otherwise.</p>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/jgaskins/redis/blob/v0.5.1/src/cluster.cr#L180" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="pipeline(key:String,&amp;)-instance-method">
      <div class="signature">
        
        def <strong>pipeline</strong>(key : String, &)

        <a class="method-permalink" href="#pipeline%28key%3AString%2C%26%29-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Run a pipeline for the specified key</p>
<pre><code class="language-crystal">cluster.pipeline <span class="s">&quot;{widgets}&quot;</span> <span class="k">do</span> <span class="o">|</span>pipe<span class="o">|</span>
  widget_ids.each <span class="k">do</span> <span class="o">|</span>id<span class="o">|</span>
    pipe.get <span class="s">&quot;{widgets}:</span><span class="i">#{</span>id<span class="i">}</span><span class="s">&quot;</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre>
<p><span class="flag yellow">WARNING</span>  All keys that this pipeline operates on <em>MUST</em> reside on the same
shard. It's best to pass a pre-hashed key (one containing <code>{}</code>) to this
method. See the example above.</p>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/jgaskins/redis/blob/v0.5.1/src/cluster.cr#L200" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="run(commandfull_command)-instance-method">
      <div class="signature">
        
        def <strong>run</strong>(command full_command)

        <a class="method-permalink" href="#run%28commandfull_command%29-instance-method">#</a>
      </div>
      
        <div class="doc">
          
            <div class="doc-inherited">
              Description copied from module <a href="../Redis/Commands.html">Redis::Commands</a>
            </div>
          
          <p>Execute the given command and return the result from the server. Commands
must be an <code>Enumerable</code> and its <code>size</code> method must be re-entrant.</p>
<pre><code class="language-crystal">run({<span class="s">&quot;set&quot;</span>, <span class="s">&quot;foo&quot;</span>, <span class="s">&quot;bar&quot;</span>})</code></pre>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/jgaskins/redis/blob/v0.5.1/src/cluster.cr#L268" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="scan_each(*args,**kwargs,&amp;):Nil-instance-method">
      <div class="signature">
        
        def <strong>scan_each</strong>(*args, **kwargs, &) : Nil

        <a class="method-permalink" href="#scan_each%28%2Aargs%2C%2A%2Akwargs%2C%26%29%3ANil-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Execute <code>Commands#scan_each</code> on each shard, yielding any matching keys.</p>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/jgaskins/redis/blob/v0.5.1/src/cluster.cr#L205" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="slot_for(key:String)-instance-method">
      <div class="signature">
        
        def <strong>slot_for</strong>(key : String)

        <a class="method-permalink" href="#slot_for%28key%3AString%29-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Return the Redis hash slot for the given key. This is useful for seeing
which shard your command will be routed to.</p>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/jgaskins/redis/blob/v0.5.1/src/cluster.cr#L381" target="_blank">View source</a>]
        
      </div>
    </div>
  




</div>

</body>
</html>
